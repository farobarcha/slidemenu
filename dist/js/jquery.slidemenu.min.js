/*
 Copyright 2014 Nathaniel Lord
 The MIT License (MIT)

 Copyright (c) 2014 Nathaniel Lord http://www.nathaniellord.com

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all
 copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
*/
'use strict';(function(b){var e=function(b,a){this.options=this.element=null;this.init("slideMenu",b,a)};e.VERSION="0.0.1";e.SLIDE_SPEED=0.5;e.DEFAULTS={side:"right",panelDirection:"vertical",iconWidth:"",panelWidth:"",autoIconWidth:!0,autoPanelWidth:!0,initialized:!1,enabled:!0,show:!1,top:"",bottom:""};e.prototype.init=function(c,a,d){this.$element=b(a);this.options=this.getOptions(d);if(this.options.initialized)console.log("Menu is already initialized. Destroy the menu before trying to initialize again.");
else{this.$element.hasClass("left-side")&&(this.options.side="left");this.$element.hasClass("horizontal-open")&&(this.options.panelDirection="horizontal");if("complete"!==document.readyState)b(document).on("ready",this.resize());else this.resize();var f=this;b(window).resize(function(a){e.prototype.resize.apply(f)});var g=0;b(".menu-item",this.$element).each(function(a,c){b(c).css("position","absolute");b(c).attr("data-index",a);b(c).css("top",g+"px");g+=b(c).height()});this.$element.off("click").on("click",
".menu-item",this,this.menuClick)}};e.prototype.menuClick=function(c){var a=c.data;b(c.currentTarget).hasClass("active")?a.close(c,a):b(c.currentTarget).parents(".slide-menu").hasClass("active")?a.switchMenus(c,a):a.openMenu(c,a)};e.prototype.getDefaults=function(){return e.DEFAULTS};e.prototype.getOptions=function(c){c=b.extend({},this.getDefaults(),this.$element.data(),c);""!==c.iconWidth&&(c.autoIconWidth=!1);""!==c.panelWidth&&(c.autoPanelWidth=!1);return c};e.prototype.resize=function(){var c=
!1,a=0;"number"==typeof this.options.top&&(a=this.options.top,this.$element.css("top",this.options.top+"px"));var d=0;"number"==typeof this.options.bottom&&(d=this.options.bottom);d=b(window).height()-a-d;d!=this.$element.height()&&(c=!0);this.options.autoIconWidth&&b(".menu-icon",this.$element).outerWidth(!0)>this.options.iconWidth&&(this.options.iconWidth=b(".menu-icon",this.$element).outerWidth(!0),c=!0);this.options.autoPanelWidth&&b(".menu-panels",this.$element).width()!=this.options.panelWidth&&
(this.options.panelWidth=b(".menu-panels",this.$element).width(),c=!0);this.options.width=this.options.panelWidth+this.options.iconWidth;!1==this.options.show&&this.show();c&&(this.$element.width(this.options.width),this.$element.height(d).css("top",a),b(".menu-panels",this.$element).height(d),"right"==this.options.side&&(c=-this.options.iconWidth-parseInt(b(".menu-items",this.$element).css("border-left-width")),b(".menu-items",this.$element).css("left",c+"px"),this.$element.hasClass("active")?b(".menu-panels",
this.$element).css("left",-this.options.width+"px"):"vertical"==this.options.panelDirection?b(".menu-panels",this.$element).css("left",-this.options.width+"px").css("bottom","100%"):b(".menu-panels",this.$element).css("left","0px")),b(".menu-close",this.$element).css("width",this.options.iconWidth+"px"))};e.prototype.openMenu=function(c,a){a.$element.trigger("slidemenu.beforeOpen");a.$element.addClass("active");b(c.currentTarget).addClass("active");var d={};if("right"==a.options.side)var d=parseInt(b(".menu-items",
a.$element).css("border-left-width")),e=parseInt(b(".menu-items",a.$element).css("left")),d={left:parseInt(-a.options.width-e-d)+"px"};else"left"==a.options.side&&(e=parseInt(b(".menu-items",a.$element).css("left")),d={right:parseInt(-a.options.width+a.options.iconWidth)+"px"});b(".menu-item.active",a.$element).animate(d,{duration:250,complete:function(){"0px"!=b(".menu-item.active",a.$element).css("top")?a.reorder(function(){a.$element.trigger("slidemenu.opened");a.openPanel(b(c.currentTarget).data("target"))}):
(a.$element.trigger("slidemenu.opened"),a.openPanel(b(c.currentTarget).data("target")))}})};e.prototype.switchMenus=function(c,a){a.closePanel();var d={};if("right"==a.options.side)var d=parseInt(b(".menu-items",a.$element).css("border-left-width")),e=parseInt(b(".menu-items",a.$element).css("left")),d={left:parseInt(-a.options.width-e-d)+"px"};else"left"==a.options.side&&(e=parseInt(b(".menu-items",a.$element).css("left")),d={right:parseInt(-a.options.width+a.options.iconWidth)+"px"});b(c.currentTarget).stop().animate(d,
{duration:250,complete:function(){a.reorder(function(){a.openPanel(b(c.currentTarget).data("target"))})}});d={};"right"==a.options.side?d={left:"0px"}:"left"==a.options.side&&(d={right:"0px"});b(".menu-item.active",a.$element).animate(d,250,function(){b(this).removeClass("active")});b(".menu-item.active",a.$element).removeClass("active");b(c.currentTarget).addClass("active")};e.prototype.close=function(c){this.$element.trigger("slidemenu.beforeClose");var a=this,d={};"right"==a.options.side?d={left:"0px"}:
"left"==this.options.side&&(d={right:"0px"});this.closePanel();b(".menu-item.active",a.$element).stop().animate(d,{duration:250,complete:function(){a.$element.removeClass("active");a.$element.trigger("slidemenu.closed");"function"==typeof c&&c();b(".menu-item.active",a.$element).removeClass("active");a.reorder()}})};e.prototype.openPanel=function(c){b(".menu-panel.active",this.$element).removeClass("active");b(c,this.$element).addClass("active");b(".menu-panel.active",this.$element).css("padding-top",
b(".menu-item.active",this.$element).outerHeight(!0)+"px");"vertical"==this.options.panelDirection?b(".menu-panels",this.$element).animate({bottom:"0%"},250,"linear"):"horizontal"==this.options.panelDirection&&(c={},"right"==this.options.side?c={left:parseInt(-this.options.width)+"px"}:"left"==this.options.side&&(c={left:this.options.iconWidth+"px"}),b(".menu-panels",this.$element).stop().animate(c,250,"linear"))};e.prototype.closePanel=function(c){c={};var a=this;"right"==this.options.side?c={left:parseInt(-this.options.iconWidth)+
"px"}:"left"==this.options.side&&(c={left:parseInt(-this.options.panelWidth+this.options.iconWidth)+"px"});b(".menu-panels",a.$element).stop().animate(c,{duration:250,complete:function(){b(".menu-panel.active",a.$element).removeClass("active");"vertical"==a.options.panelDirection&&("right"==a.options.side?b(this).css("bottom","100%").css("left",-a.options.width+"px"):"left"==a.options.side&&b(this).css("bottom","100%").css("left",a.options.iconWidth+"px"))}})};e.prototype.open=function(c){b(".menu-item[data-target='"+
c+"']",this.$element).click()};e.prototype.hide=function(c){function a(){"right"==d.options.side?(b(".menu-panels",d.$element).css("left","0px"),b(".menu-items",d.$element).animate({left:"0px"},250)):(b(".menu-panels",d.$element).css("left","0px"),b(".menu-items",d.$element).animate({left:-d.options.width+"px"},250));d.options.show=!1}var d=this;this.isOpen()?d.close(function(){a()}):a()};e.prototype.show=function(c){if(!0!=this.options.show){var a=this;if(0==parseInt(b(".menu-items",a.$element).css("right"))||
0==parseInt(b(".menu-items",a.$element).css("left")))if("right"==this.options.side){var d=-a.options.iconWidth-parseInt(b(".menu-items",a.$element).css("border-left-width")),e={duration:250,complete:function(){"vertical"==a.options.panelDirection?b(".menu-panels",a.$element).css("left",-a.options.width+"px").css("bottom","100%"):"horizontal"==a.options.panelDirection&&b(".menu-panels",a.$element).css("left",d+"px").css("top","0px");a.options.show=!0;a.resize();"function"==typeof c&&c()}};b(".menu-items",
a.$element).css("left","0px").animate({left:d+"px"},e)}else d=-a.options.width+a.options.iconWidth,e={duration:250,complete:function(){"vertical"==a.options.panelDirection?b(".menu-panels",a.$element).css("left",a.options.iconWidth+"px").css("bottom","100%"):"horizontal"==options.panelDirection&&b(".menu-panels",a.$element).css("left",d+"px").css("top","0px");a.options.show=!0;a.resize();"function"==typeof c&&c()}},b(".menu-items",a.$element).css("left",-a.options.width+"px").animate({left:d+"px"},
e);a.options.initialized=!0}};e.prototype.generateID=function(){for(var c=1,a="slidemenu-panel-"+c;0<b("#"+a).length;)c++,a="slidemenu-panel-"+c;return a};e.prototype.addTab=function(c){var a=b(c.tab);c=b(c.content);void 0===b(c).attr("id")&&b(c).attr("id",this.generateID());b(a).attr("data-target",b(c).attr("id"));!1==b(a).hasClass("menu-item")&&b(a).addClass("menu-item");!1==b(c).hasClass("menu-panel")&&b(c).addClass("menu-panel");b(".menu-items",this.$element).append(a);b(".menu-panels",this.$element).append(c);
this.reorder()};e.prototype.removeTab=function(c){b(".menu-item[data-target='"+c+"']",this.$element).replaceWith("");b(c,this.$element).replaceWith("");this.reorder()};e.prototype.hideTab=function(c){if(b(".menu-item[data-target='"+c+"']",this.$element).hasClass("active")){var a=this;this.close(function(){b(".menu-item[data-target='"+c+"']",a.$element).hide()})}else b(".menu-item[data-target='"+c+"']",this.$element).hide(),this.reorder()};e.prototype.showTab=function(c){b(".menu-item[data-target='"+
c+"']",this.$element).show();this.reorder()};e.prototype.changePosition=function(c){var a=c.target;c=c.position;var d=b(".menu-item[data-target='"+a+"']",this.$element);b(".menu-item[data-target='"+a+"']",this.$element).replaceWith("");1==c?b(".menu-items",this.$element).prepend(d):b(".menu-item:nth-child("+parseInt(c-1)+")",this.$element).after(d);this.reorder()};e.prototype.reorder=function(c){var a=0;"0px"==b(".menu-item.active",this.$element).css("top")?"function"===typeof c&&c():0<b(".menu-item.active",
this.$element).length&&(b(".menu-item.active",this.$element).animate({top:a+"px"},{duration:250,complete:function(){"function"===typeof c&&c()}}),a+=b(".menu-item.active",this.$element).height());b(".menu-item.active").length&&(a=b(".menu-item.active").height());b(".menu-item:visible",this.$element).each(function(c,e){!1==b(e).hasClass("active")&&(b(e).animate({top:a+"px"},250),a+=b(e).height())})};e.prototype.disable=function(b){this.options.enabled=!1};e.prototype.enable=function(b){this.options.enabled=
!0};e.prototype.isOpen=function(){return this.$element.hasClass("active")};e.prototype.destroy=function(){this.$element.css("width","").css("height","").css("top","");this.$element.find(".menu-items").css("left","");this.$element.find(".menu-panels").css("height","").css("left","").css("bottom","");this.$element.find(".menu-item").css("position","").css("top","").css("left","");this.$element.find(".menu-close").css("width","");this.$element.find(".menu-panel").css("padding-top","");delete this.options;
delete this.$element};var h=b.fn.slidemenu;b.fn.slidemenu=function(c,a){return this.each(function(){var d=b(this),f=d.data("slidemenu"),g="object"==typeof c&&c;f||d.data("slidemenu",f=new e(this,g));if("string"==typeof c)f[c](a)})};b.fn.slidemenu.Constructor=e;b.fn.slidemenu.noConflict=function(){b.fn.slidemenu=h;return this}})(jQuery);
